<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel='shortcut icon' type='image/x-icon' href='favicon.ico' />
    <title>HSK Flash Cards</title>

    <style>
*, *:before, *:after {
  box-sizing: border-box;
}
html, body {
  height: 100%;
}
body {
  margin: 0;
  font-family: Helvetica, Ubuntu, Arial, sans-serif;
}
.container {
  height: 100%;
  display: flex;
  padding: 0;
  margin: 0;

  flex-direction: row; 
  justify-content: center;
  align-content: center;
  align-items: center;
}

    </style>

    <script src="components/utils.js"></script>
    <script src="components/x-banner.js"></script>
    <script src="components/flash-card.js"></script>

  </head>
  <body>
    <x-banner title="HSK Flash Cards" href="https://github.com/richardscollin/tonepairs"></x-banner>
    <div class="container">
      <flash-card index="0" type="traditional"></flash-card>
    </div>

    <script>
      function registerKeyboardShortcuts(fc) {
        document.addEventListener("keyup", event => {
          if (event.key === "ArrowRight") {
            fc.next();
            fc.update();
          } else if (event.key === "ArrowLeft") {
            fc.previous();
            fc.update();
          }
        });
      }
      window.onload = () => {
        deck = [];
        fetch('hsk-v2.json')
        .then((resp) => resp.json())
        .then((data) => {
          deck = shuffle(data);
          let fc = document.querySelector('flash-card');
          fc.fill();
          fc.update();
          registerKeyboardShortcuts(fc);
        }).catch(error => console.error('Error:', error));

        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.register('/tonepairs/sw.js')
            .then(function(registration) {
              console.log('Registration successful, scope is:', registration.scope);
            })
            .catch(function(error) {
              console.log('Service worker registration failed, error:', error);
            });
        }
      };
    </script>
  </body>
</html>
